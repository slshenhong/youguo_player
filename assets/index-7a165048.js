import{_}from"./index-2b1034da.js";import{z as l,A as v,h,n as p,o as u,B as f,C as g}from"./vendor-f1f9cdb2.js";const b={class:"login-content"},m=g('<div class="page-account-container" data-v-75a760b7><div class="right-desc" data-v-75a760b7></div><div class="left-code" data-v-75a760b7><div class="qr-code" data-v-75a760b7><div id="qr-code" data-v-75a760b7></div></div><div class="left-code-desc" data-v-75a760b7><p data-v-75a760b7>请使用飞书扫描二维码登录</p></div></div></div>',1),y=[m],w={__name:"index",setup(x){const{proxy:o}=l(),d=o.$pub,a=o.$api,t=v({obj:null,goto:""});function s(){this.query=d.slPubGetQuery(),this.query.key&&a.getTokenByCode({loading:!1,data:{key:this.query.key}}).then(e=>{this.$store.commit("setToken",e),this.$router.push({path:"/"})})}function i(e){let n=e.origin;if(t.obj.matchOrigin(n)){let r=e.data;window.location.href=`${t.goto}&tmp_code=${r}`}}function c(){a.feiShuLogin().then(e=>{t.obj=QRLogin({id:"qr-code",width:"300",height:"300",goto:e}),t.goto=e})}return h(()=>{p(()=>{typeof window.addEventListener<"u"?window.addEventListener("message",e=>{i(e)},!1):typeof window.attachEvent<"u"&&window.attachEvent("onmessage",e=>{i(e)}),c()}),s()}),(e,n)=>(u(),f("div",b,y))}},$=_(w,[["__scopeId","data-v-75a760b7"]]);export{$ as default};
